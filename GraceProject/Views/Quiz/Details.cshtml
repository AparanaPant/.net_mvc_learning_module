@model GraceProject.Models.Quiz

@{
    ViewData["Title"] = "Quiz Details";
    Layout = "~/Views/Shared/_StudentLayout.cshtml";
}

<div class="container">
    <h1 class="display-4 text-center">📖 Quiz: @Model.Title</h1>
    <p class="text-center"><strong>Duration:</strong> @Model.Duration minutes</p>
    <p class="text-center"><strong>Created At:</strong> @Model.CreatedAt.ToString("yyyy-MM-dd HH:mm")</p>

    <h2 class="mt-4">📜 Questions</h2>

    @if (Model.Questions.Any())
    {
        <div class="accordion" id="quizQuestions">
            @foreach (var question in Model.Questions)
            {
                <div class="card">
                    <div class="card-header" id="heading-@question.QuestionId">
                        <h5 class="mb-0">
                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-@question.QuestionId"
                                    aria-expanded="true" aria-controls="collapse-@question.QuestionId">
                                ❓ @question.Text
                            </button>
                        </h5>
                    </div>

                    <div id="collapse-@question.QuestionId" class="collapse show" aria-labelledby="heading-@question.QuestionId" data-parent="#quizQuestions">
                        <div class="card-body">
                            @if (question.Type == "Fill in the Blank")
                            {
                                <h5>📝 Correct Answers:</h5>
                                <ul>
                                    @foreach (var answer in question.FillInTheBlankAnswers)
                                    {
                                        <li><strong>@answer.Answer</strong></li>
                                    }
                                </ul>
                            }
                            else
                            {
                                <h5>📝 Options:</h5>
                                <ul>
                                    @foreach (var option in question.Options)
                                    {
                                        <li class="@(option.IsCorrect ? "text-success font-weight-bold" : "")">
                                            @option.Text @(option.IsCorrect ? "✅" : "❌")
                                        </li>
                                    }
                                </ul>
                            }

                            @if (!string.IsNullOrEmpty(question.ImageUrl))
                            {
                                <h5>📷 Attached Image:</h5>
                                <img src="@question.ImageUrl" class="img-fluid rounded" alt="Question Image" style="max-width: 300px;">
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-warning">⚠ No questions available in this quiz.</p>
    }
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $(".collapse").collapse();
        });
    </script>
}
